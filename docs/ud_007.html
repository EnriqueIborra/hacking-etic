<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=0.5, user-scalable=yes">

  <link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css" />

  <title>U7 - HE a Xarxes sense fil</title>
  <link rel="stylesheet" href="estilsunitats.css">
  
</head>
<body>
  <!--<button class="theme-toggle" onclick="toggleTheme()"></button> -->
  <button class="theme-toggle" onclick="toggleTheme()">
    <i class="hgi hgi-stroke hgi-sun-01" id="theme-icon"></i>
  </button>

  <!-- boto menu hamburguesa  +  javascript -->
  <button class="hamburger" onclick="toggleMenu()" aria-label="Abrir men√∫ de navegaci√≥n">
    <span id="menu-icon">‚ò∞</span>
  </button>
  
  <div class="sidebar">
    <a href="#comwifi">Comunicacions en xarxes sense fil</a>
    <a href="#AtacsaWiFi">Atacs a xarxes WiFi</a>
    <a href="#labs">Laboratoris</a>
  </div>

  <div style="width: 100%;">
    <header>
      <a href="index.html"><img src="imgs/HEcap.png" alt="HE" width="80%"></a>
      <!--<h2>üÖ∑üÖ∞üÖ≤üÖ∫üÖ∏üÖΩüÖ∂ √àüÜÉüÖ∏üÖ≤</h2> -->
      <h1>Unitat 7: Hacking √âtic a Xarxes sense fil</h1>
      <h1>.</h1>
    </header>
    
    <main>

    <section id="comwifi">
    <h1>Introducci√≥ a les comunicacions sense fil</h1>
    <p>Totes les pr√†ctiques d'este curs es realitzaran baix:     </p>
        <ul>
            <li>‚öñÔ∏è Un marc legal i √®tic</li>
            <li>üîí Entorn a√Øllat</li>
            <li>üß™ Controlat</li>
            <li>üìú Amb perm√≠s</li>
            <li>üéì Fins educatius / professionals</li>
        </ul>


    </section>    
  
   <section>
    <h1>Tecnologia sense fil</h1>
    <p>La tecnologia sense fil permet la comunicaci√≥ entre dispositius sense cables, usant ones 
        electromagn√®tiques (com a radiofreq√º√®ncia) per a transmetre dades, oferint mobilitat,
         flexibilitat i comoditat en llars, empreses i telecomunicacions mitjan√ßant protocols 
         com a Wi-Fi, WiMAX, NFC, Bluetooth, Zigbee,  LTE/5g, GPS, IR, entre altres.</p>
    <p>S'usa una banda de radiofreq√º√®ncia per a enviar i rebre informaci√≥ entre un emissor i un receptor. 
        Els dispositius es connecten a una xarxa a trav√©s d'un punt d'acc√©s (com un encaminador/router) que 
        emet senyals.</p>

    <h1>WiFi</h1>
    <p>Wifi √©s una tecnologia de xarxa sense fil que utilitza ones de r√†dio per a proporcionar connexi√≥ de xarxa 
        d'alta velocitat i acc√©s a Internet sense necessitat de connexions f√≠siques per cable.</p>
    <p>Entre els avantatges es pot citar la facilitat d'instal¬∑laci√≥, la seua senzillesa i el seu menor cost,
        i entre els desavantatges, un rendiment menor que les xarxes cablejades i una seguretat menor en tant que no √©s necessari l'acc√©s f√≠sic per a interceptar informaci√≥.</p>
    <ol> Es poden classificar segons la cobertura en:
        <li>WPAN : Wireless Personal Area Network</li>
        <li>WLAN : Wireless Local Area Network</li>
        <li>WMAN : ..Metropolitan... Per exemple WiMAX</li>
        <li>WWAN : Wireless Wide Area Network</li>
    </ol>
    <p>Altre concepte que cal recordar. La capa d'enlla√ß de dades es divideix en dos subcapes</p>
    <ul>
        <li>LLC: Link Layer Control. Oferix interficie amb les capes superiors</li>
        <li>MAC: Media Acces Control. Implementada en Hardware i adaptada a les distintes tecnologies de xarxa i mitjans f√≠sics</li>
        Ethernet (802.3), Sense fil(wifi-802.11), etc...
    </ul>

    <h2>Estandars 802.11 (WiFi)</h2>
    <p>802.11 √©s un grup de treball del IEEE encarregat de definir Estandars sobre xarxes locals sense fil. Des de 1997 han anat 
        publicant distintes versions...      </p>
    <ul>
        <li>1999: 802.11a i  802.11b, utilitza bandes (a)5GHz i (b)2,4GHz , amb velocitats de 54 i 11 Mbps respectivament</li>
        <li>2003: 802.11g, utilitza 2,4GHz a 54Mbps</li>
        <li>2009: 802.11n, conegut com WiFi4, per la <strong>Wi-Fi Alliance</strong>, amb velocitat teorica de 600 Mbps</li>
        Combina t√®cniques noves com MIMO (dos antenes, 2 canals a la vegada) i uni√≥ de canals en uno.
        <li>2013: WiFi5 o 802.11ac. Utilitza banda de 5 GHz, amb velocitat teorica de 7 Gbps</li>
        <li>2021: WiFi6 o 802.11ax. Velocitat teorica de 10 Gbps. Pot utilitzar la banda de 6 GHz. Gesti√≥ de m√©s dispositius connectats al mateix temps</li>
        <li>2024: WiFi7 o 802.11be. Velocitat teorica de 46 Gbps. Menor lat√®ncia. M√©s efici√®ncia en entorns congestionats</li>
    </ul>
    <p>La <strong>Wi-Fi Alliance</strong> √©s una organitzaci√≥ internacional sense √†nim de lucre que s‚Äôencarrega de garantir que els dispositius Wi-Fi 
        funcionen correctament entre ells, encara que siguin de fabricants diferents. Tamb√© dona noms comercials als est√†ndards, com: WiFi5, WiFi6,
    i certifica dispositius (routers, m√≤bils, ordinadors, IoT, etc.) perqu√® compleixin aquests est√†ndards. Quan veus el logotip ‚ÄúWi-Fi CERTIFIED‚Äù 
    en un producte, vol dir que ha passat proves oficials de la Wi-Fi Alliance.</p>


    <h2>Bandes de freq√º√®ncia</h2>
    <p>WiFi pot funcionar en dos bandes, la 2,4 i la 5 GHz. Les bandes son rangs de freq√º√®ncies que es divideixen en <strong>canals</strong>
    d'una certa amplada, a trav√®s de la qual es transment.</p>
    <h3>2,4GHz</h3> <img src="imgs/B2-4GHz.jpg" alt="2400MHz" width="48%" class="imatge-dreta">   
    <p>√âs un rang de freq√º√®ncies que va des de 2400 MHz a 2483 MHz. Este espai es divideix en <strong>tretze canals</strong>
    de 22 MHz d'amplada cadascu (20 per dades i 2 per evitar solapaments entre canals separats (1,6,11)) i m√©s tard es va afegir el canal 14</p>
    <p>WiFi Analyzer √©s una aplicaci√≥ per mostrar l'ocupaci√≥ de la banda</p>
    <ol> Avantatges
        <li>Extensa cobertura</li>
        <li>Bona capacitat de penetraci√≥ d'obstacles</li>
        <li>Alta compatibiitat</li>
    </ol>
    <ol>Desavantatges
        <li>Menys velocitat que 5 GHz</li>
        <li>Sol estar prou saturada</li>
    </ol>

    <h3>5 GHz</h3> 
    <p>Es troba entre 5180 MHz i 5825 MHz. Segons el ample de canal, s'obtenen m√©s o menys canals. L'amplada de canal possibles s√≥n 
        20, 40, 80 i 160 MHz  </p>
    <p>Avantatges: major velocitat i m√©s canals per utilitzar</p>    
    <p>Desavantatges: Cobertura menor i poder de penetraci√≥ m√©s baix que 2,4</p>
    <p>En esta banda, alguns canals tenen <strong>restricions d'√∫s</strong>. En europa hi ha canals reservats per radars, defensa 
    o meteorologia (DFS) , o canals amb restricci√≥ de potencia (TPC)</p>
    <img src="imgs/banda 5GHz.png" alt="5GHz" width="58%" >   

    <hr><h2>Protocols de seguretat</h2>
    <p>Un dels principals punts al moment d'implantar xarxes sense fil √©s la seguretat, donat que el mitj√† de transmisi√≥, al
        ser l'aire, es compartit (inevitablement). Per tant, es necessari dotar de mecanismes que garanteixen la <strong>autenticitat</strong>,
        la <strong>integritat</strong>, i sobre tot, la <strong>confidencialitat</strong>.
    </p>
    <h3>WEP</h3>
    <p>Wired Equivalent Privacy. √âs el primer protocol de seguretat per a WLAN. Oferix dos tipos d'autenticaci√≥.</p>
    <ol>
        <li>Open</li>
        <li>SKA : Shared Key Authentication</li>
    </ol>
    <ol> OPEN
        <li>No comprova la clau WEP durant l‚Äôautenticaci√≥ </li>
        <li>Qualsevol dispositiu pot autenticar-se amb el punt d‚Äôacc√©s </li>
        <li>La clau WEP nom√©s s‚Äôusa despr√©s, per xifrar les dades    </li>
        <li>Si el client no t√© la clau correcta, no podr√† comunicar-se despr√©s</li>
    </ol>
    <ol> SKA
        <li>Utilitza la clau WEP durant l‚Äôautenticaci√≥ </li>
        <li>Es fa un repte-resposta (challenge‚Äìresponse)</li>
        <li>Si no es coneix la clau, no es pot connectar(associar) al AP </li>
    </ol>
    <p class="alert"> ‚ö†Ô∏è En 2004, va ser retirat per la <strong>WiFi Alliance</strong>, i va ser declarat "obsolet"</p>

    <hr><h3>WPA i WPA2</h3>
    <p><strong>WPA </strong> (Wifi Protected Access)</p>
    <ul> Oferix dos models d'autenticaci√≥
        <li>WPA Personal: amb PSK</li>
        <li>WPA Enterprise: Utilitza servidor d'autenticaci√≥</li>
    </ul>
    <p>En 2004, es publica <strong>WPA2</strong>, requisit de la WiFi Alliance, millorant algorismes de xifrat del protocol</p>
    
    <hr><h3>WPA3</h3>
    <p>Apareix en 2018 com a millora del WPA2, encara que hui en dia no est√† molt est√©s.</p>
  
    </section>         
 

    
    <section id="AtacsaWiFi">
    <h1>Atacs a WiFi</h1>
    <p>L'auditoria de xarxes sense fil es una part important de la labor del pentesting. Estes comunicacions poden ser interceptades 
        per qualsevol que estiga dins del rang de la senyal de radio, i per aix√≥, la seua correcta protecci√≥ √©s de vital import√†ncia.     </p>
    
    <h2>Metodologia OWISAM per auditoria de xarxes sense fil</h2>
    <p>    OWISAM (Open Wireless Security Assessment Methodology) √©s una metodologia pensada per avaluar la seguretat de 
        xarxes sense fils d‚Äôuna manera ordenada, professional i repetible. El seu objectiu no √©s ‚Äútrencar el Wi-Fi‚Äù, sin√≥ 
        mesurar fins a quin punt una xarxa wireless √©s segura en un entorn real i quin risc representa per a l‚Äôorganitzaci√≥. </p>
    <p>(En un context d'aplicacions web, l'equivalent seria L‚ÄôOWASP Testing Guide)</p>
    <p>No dep√®n d‚Äôuna entitat oficial centralitzada com OWASP, per√≤ s‚Äôassocia sovint amb empreses o grups de professionals que
      la fan servir o promocionen (p. ex., Tarlogic)</p>

    <p>La metodologia estableix una serie de riscos de seguretat. Estos riscos es classifiquen en deu categories.     </p>

        <table border="1" cellpadding="6" cellspacing="0">
        <thead>
            <tr>
                <th>Codi OWISAM</th>
                <th>Descripci√≥</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>OWISAM-TR-001</td>                <td>Xarxa de comunicacions Wi-Fi oberta.</td>
            </tr>
            <tr>
                <td>OWISAM-TR-002</td>                <td>Pres√®ncia de xifrat WEP en xarxes de comunicacions.</td>
            </tr>
            <tr>
                <td>OWISAM-TR-003</td>                <td>Algorisme de generaci√≥ de claus del dispositiu insegur (contrasenyes i WPS).</td>
            </tr>
            <tr>
                <td>OWISAM-TR-004</td>                <td>Clau WEP/WPA/WPA2 basada en diccionari.</td>
            </tr>
            <tr>
                <td>OWISAM-TR-005</td>                <td>Mecanismes d‚Äôautenticaci√≥ insegurs (LEAP, PEAP-MD5, etc.).</td>
            </tr>
            <tr>
                <td>OWISAM-TR-006</td>                <td>Dispositiu amb suport de Wi-Fi Protected Setup (PIN) actiu (WPS).</td>
            </tr>
            <tr>
                <td>OWISAM-TR-007</td>                <td>Xarxa Wi-Fi no autoritzada per l‚Äôorganitzaci√≥.</td>
            </tr>
            <tr>
                <td>OWISAM-TR-008</td>                <td>Portal hotspot insegur.</td>
            </tr>
            <tr>
                <td>OWISAM-TR-009</td>                <td>Client intentant connectar-se a una xarxa insegura.</td>
            </tr>
            <tr>
                <td>OWISAM-TR-010</td>                <td>Abast de cobertura de la xarxa excessivament ampli.</td>
            </tr>
        </tbody>
    </table>
        <p>La metodologia estableix una serie de controls que es deuen de dur a terme per garantizar el risc de seguretat. Estos 
        controls es classifiquen en deu categories.     </p>
        <table border="1" cellpadding="6" cellspacing="0">
            <thead>
                <tr>
                    <th>#</th>                    <th>Codi</th>                    <th>Tipus de control</th>
                    <th>Descripci√≥ dels controls</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>                    <td>OWISAM-DI</td>                    <td>Descobriment de dispositius</td>
                    <td>Recopilaci√≥ d‚Äôinformaci√≥ sobre les xarxes sense fils.</td>
                </tr>
                <tr>
                    <td>2</td>                    <td>OWISAM-FP</td>                    <td>Fingerprinting</td>
                    <td>An√†lisi de les funcionalitats dels dispositius de comunicacions.</td>
                </tr>
                <tr>
                    <td>3</td>                    <td>OWISAM-AU</td>                    <td>Proves sobre l‚Äôautenticaci√≥</td>
                    <td>An√†lisi dels mecanismes d‚Äôautenticaci√≥.</td>
                </tr>
                <tr>
                    <td>4</td>                    <td>OWISAM-CP</td>                    <td>Xifrat de les comunicacions</td>
                    <td>An√†lisi dels mecanismes de xifrat de la informaci√≥.</td>
                </tr>
                <tr>
                    <td>5</td>                    <td>OWISAM-CF</td>                    <td>Configuraci√≥ de la plataforma</td>
                    <td>Verificaci√≥ de la configuraci√≥ de les xarxes.</td>
                </tr>
                <tr>
                    <td>6</td>                    <td>OWISAM-IF</td>                    <td>Proves d‚Äôinfraestructura</td>
                    <td>Controls de seguretat sobre la infraestructura wireless.</td>
                </tr>
                <tr>
                    <td>7</td>                    <td>OWISAM-DS</td>                    <td>Proves de denegaci√≥ de servei</td>
                    <td>Controls orientats a verificar la disponibilitat de l‚Äôentorn.</td>
                </tr>
                <tr>
                    <td>8</td>                    <td>OWISAM-GD</td>                    <td>Proves sobre directives i normativa</td>
                    <td>An√†lisi dels aspectes normatius que s‚Äôapliquen a l‚Äô√∫s de les xarxes Wi-Fi.</td>
                </tr>
                <tr>
                    <td>9</td>                    <td>OWISAM-CT</td>                    <td>Proves sobre els clients sense fils</td>
                    <td>Avaluaci√≥ de vulnerabilitats que afecten els clients sense fils.</td>
                </tr>
                <tr>
                    <td>10</td>                    <td>OWISAM-HS</td>                    <td>Proves sobre hotspots i portals captius</td>
                    <td>Debilitats que afecten l‚Äô√∫s de portals captius.</td>
                </tr>
            </tbody>
        </table>
    <p>Per poder realitzar atacs (√®tics) a xarxes sense fil √©s necessari que la tarjeta de xarxa puga pasar a <strong>mode monitor</strong>
    per llegir tot el tr√†nsit i injectar paquets. No totes les tarjetes de xarxa permeten aix√≤, pel que s'ha de comprovar si 
    la tarjeta t√© estes capacitats. </p>

    <hr><h2>Suite aircrack-ng</h2>
    <p>La suite aircrack-ng consta d'un conjunt de ferramentes per realitzar les auditories de xarxes sense fil. Est√† disponible tant 
        per a Windows com per a Linux. A m√©s a m√©s, es trova instal¬∑lada a Kali.</p>
    <ul> Consta de:
        <li>airmon-ng:  Per canviar el mode de treball de la tarjeta</li>
        <li>airodump-ng: Per escoltar tr√†nsit</li>
        <li>aireplay-ng: Permet realitzar ataca sobre punts d'acc√©s injectant <strong>frames</strong></li>
        <li>aircrack-ng: Permet fer atacks de for√ßa bruta, diccionari o estadistic sobre captures de tr√†nsit</li>
        <li>airdecap-ng: Permet desxifrar captures de tr√†nsit xifrat amb WEP i WPA sempre que es dispose de la clau</li>
        <li>airbase-ng: Permet atacar a clients i crear punts d'acc√©s falsos</li>
        <li>airdecloack-ng: Elimina paquets de tipus WEP cloacking</li>
        <li>airolib-ng: Permet emmagatzemar llistes de ESSID i claus, calcular PMK i usar-les per crackejar WPA/WPA2</li>
        <li>airserv-ng: Permet crear un servidor wireless per permetre que m√∫ltiples aplicacions usen la tarjeta sense fil</li>
        <li>airtun-ng: Permet crear interficies virtuals anomenades (tunnels) per monitoritzar tr√†nsit xifrat amb prop√≤sit de WIDS (Wireless Intrusion Detection System)</li>
    </ul>

    <h3>Establir targeta en mode monitor</h3>
    <pre>airmon-ng  start|stop|check  interficie  [channel or frequency]</pre>
    <p>Compte, quan es canvia a mode monitor, la interficie canvia de nom !</p>

    <h3>Descobriment de xarxes sense fil</h3>
    <pre>airodump interficie</pre>
    <p>L'eixida d'airodump-ng mostra en primer lloc, els <strong>punts d'acc√©s (AP)</strong>. <br> 
        A continuaci√≥, es mostra informaci√≥ sobre <strong>els equips</strong> (STATION)
        connectats a punts d'acc√©s (BSSID) o que han intentat identificar una xarxa en concret (Probe).     </p>

    <ul> Dades dels punts d'acc√©s
        <li>BSSID: Adre√ßa MAC del punt d'acc√©s (AP)</li>
        <li>PWR: Pot√®ncia de la senyal</li>
        <li>Beacons : Num de paquets anuncis enviats pel AP</li>
        <li>#Data: Num de paquets capturats (en WEP sols els IV)</li>
        <li>#/s : Num de paquets capturats cada 10 segons</li>
        <li>CH : Canal </li>
        <li>MB : Velocitat</li>
        <li>ENC : Algorisme de xifrat usat pel AP ( <strong>OPN, WEP, WPA, WPA2</strong> )</li>
        <li>CIPHER : Tipus de xifrat ( <strong>WEP,TKIP(WPA), CCMP(WPA2)</strong> )</li>
        <li>AUTH : M√®tode d'autenticaci√≥ (PSK generalment)</li>
        <li>ESSID : Nom de la xarxa sense fil</li>
    </ul>    
    <p>Una volta identificada la xarxa sobre la qual es desitja fer l'auditoria, es pot fer servir el comando <strong>airodump-ng </strong>
    amb l'opci√≥ --bssid per indicar la MAC del punt d'acc√©s, o la opci√≥ --channel per indicar el canal que es desitja escoltar. 
    L'opci√≥ --write permet especificar el nom del fitxer on s'emmagatzemaran els paquets capturats</p>
    <pre>airodump-ng --bssid aa:aa:aa:bb:00:01 --channel 1 --write captura wlan1</pre>
    <p>Si no s'indica la extensi√≥ del fitxer, es guardaran les captures en els diferents formats possibles (.cap .csv .kismet.csv .kismet.netxml)</p>

  <hr><h2>Atacs als protocols de seguretat</h2>
  <p>Es importat coneixer els principals investigacions sobre vulnerabilitats en el protocol 802.11 que han perm√©s dissenyar atacs
    per poder obtindre claus utilitzades en les comunicacions. </p>
    <ul>
        <li>WEP: Korek ChopChop Attack, Fragmentation Attack, PTW Attack </li>
        <li>WPA: Ohigashi-Mori Attack, Michael Attack, Hole196 vulnerability</li>
        <li>WPA2: Krack Attacks, Kr00k</li>
        <li>WPA3: DragonBlood bugs, FragAttaks</li>
    </ul>

    <hr><h2>Atacs a WEP</h2>
    <p>Existeixen diverses debilitats en el protocol WEP</p>
    <p>  <strong>La vulnerabilitat del IV (Initialization Vector)</strong> en WEP √©s el motiu principal pel qual aquest protocol es considera 
         trencat i obsolet.  </p>
    <ul>WEP utilitza l‚Äôalgorisme de xifrat RC4, que necessita dues coses per funcionar:
        <li>una clau secreta (compartida per tots els usuaris) </li>
        <li>i un vector d‚Äôinicialitzaci√≥ (IV).   </li>
    </ul>        

    <p>El problema √©s que el IV de WEP t√© nom√©s 24 bits. A√ß√≤ implica que el nombre total d‚ÄôIV possibles √©s molt limitat.
         En una xarxa Wi-Fi amb una mica de tr√†nsit, aquests IV es repeteixen molt r√†pidament, fins i tot en q√ºesti√≥ de minuts.
          Quan dos paquets s‚Äôenvien amb el mateix IV i la mateixa clau, el xifrat que es genera √©s relacionable matem√†ticament.</p>
    <p>El segon gran error de WEP √©s que el IV s‚Äôenvia en clar dins del paquet. √âs a dir, qualsevol que estiga escoltant el tr√†nsit pot veure quin IV s‚Äôest√† utilitzant en cada comunicaci√≥. Aix√≤ permet a un observador recopilar grans quantitats de paquets amb IV coneguts.     </p>
    <p>El tercer problema √©s m√©s greu encara: alguns IV s√≥n ‚Äúfebles‚Äù. Aquests IV provoquen biaixos en la manera com RC4 genera el flux de xifrat. Aquests biaixos permeten deduir informaci√≥ sobre la clau secreta quan s‚Äôanalitzen molts paquets. </p>
    <p>Quan es combinen tots aquests factors ‚ÄîIV curt, reutilitzaci√≥ freq√ºent, IV visible i IV febles‚Äî, el resultat √©s que : <br>
       <strong> la clau WEP es pot recuperar estad√≠sticament sense necessitat de con√©ixer cap contrasenya ni interactuar activament amb la xarxa.</strong> </p>

    <ul>√âs important entendre que:
        <li>el problema no √©s la contrasenya</li>
        <li>ni tampoc la configuraci√≥ concreta</li>
        <li>sin√≥ el disseny criptogr√†fic del protocol</li>
    </ul>
    <p>Per aix√≤ WEP no es pot ‚Äúassegurar‚Äù amb bones pr√†ctiques: est√† mal dissenyat des de l‚Äôorigen. Des del punt de vista d‚Äôuna auditoria
        o pentest, trobar WEP actiu no √©s una ‚Äúvulnerabilitat menor‚Äù, sin√≥ un risc cr√≠tic, perqu√® implica que la confidencialitat del tr√†nsit 
        no est√† garantida en absolut. Per aix√≤ totes les normatives i metodologies modernes consideren WEP com a inacceptable.</p>

    <p><strong>Altra vulnerabilitat WEP: </strong> La capcitat de generar paquets legitims sense coneixer la clau secreta.
        A√ß√≤ permet que un atacant: </p>
    <ul>
        <li>capture un paquet leg√≠tim</li>
        <li>modifique el contingut xifrat</li>
        <li>recalcule l‚ÄôICV corresponent</li>
        <li>i genere un nou paquet que passa la validaci√≥ del punt d‚Äôacc√©s</li>
    </ul>

    <h4>En resum:</h4>
    <p><strong>Si hi ha molt tr√†nsit en la xarxa</strong></p>
    <p>En una terminal es capturen trames</p>
    <pre>airodump-ng --channel canal --bssid BSSID --write fitxer  wlan1</pre>
    <p>En altra terminal, es procedeix a crackejar, (quan es capturen al voltant de 100.000 trames )</p>
    <pre>aircrack-ng fitxer</pre>

    <p><strong>Si hi ha poc tr√†nsit en la xarxa</strong></p>
    <p>*** En este cas s'ha de generar el transit primer.....</p>
    <p>Varia, si la autenticaci√≥ es OPEN o SKA</p>

    <p>Si es OPEN</p>
    <ol>
        <li>Es capturen trames i es guarden en un fitxer, ( i es deixa escoltant i capturant..)</li>
        <pre>airodump-ng --channel canal --bssid BSSID --write fitxer  wlan1</pre>
        <li>Associar-se al AP, per capturar una trama ARP, i enviar-la milers de vegades, per generar tr√†nsit i IVs, per poder extraure la contrasenya</li>
    </ol>
    <pre># Autenticar-se en el AP
aireplay-ng --fakeauth 0 -a BSSID -h la_teua_mac  wlan1
# Capturar una paquet ARP, i se reenvia al AP
aireplay-ng --arpreplay -b BSSID -h la_teua_mac  wlan1      </pre>

    <p>Si es SDK</p>
    <ol>
        <li>Es capturen trames i es guarden en un fitxer, ( i es deixa escoltant i capturant..)</li>
        <pre>airodump-ng --channel canal --bssid BSSID --write fitxer  wlan1</pre>
        <li>Es necessari capturar un "handshake". Esperem a que un client autentique o "tirem" fora un client, per for√ßar a que autentique</li>
        <li>Capturem el "handshake", i a√ß√≤ genera un fitxer .xor</li>
        <li>Associar-se al AP, per capturar una trama ARP, i enviar-la milers de vegades, per generar tr√†nsit i IVs, per poder extraure la contrasenya</li>
    </ol>
    <pre># Desautenticar un client
aireplay-ng --deauth 1 -a BSSID -c mac_client  wlan1
# Autenticar-se en el AP
aireplay-ng --fakeauth 0 -y fitxer.xor -a BSSID -h la_teua_mac  wlan1
# Capturar una paquet ARP , i se reenvia al AP
aireplay-ng --arpreplay -b BSSID -h la_teua_mac  wlan1      </pre>

        <p>En els dos casos, en altra terminal, es crackeja la contrasenya</p>
        <pre>aircrack-ng fitxer</pre>

     <h4>Korek ChopChop</h4>   
     <pre>aireplay-ng --chopchop -b BSSID -h MAC_client wlan1</pre>

     <h4>Atac de Fragmentaci√≥</h4>
     <p>L'objectiu d'este atac √©s obtindre el <strong>keystream</strong> , tamb√© conegut com <strong>PRGA</strong> 
    (Pseudo Random Generation Algorithm). El keystream s'utilitzar√† per construir paquets v√†lids que seran acceptats per l'AP</p>
    <p>En la documentaci√≥ de aircrack-ng es detalla com executar este atac</p>

    <hr><h2>Atacs a WPA i WPA2</h2>
    <p>A difer√®ncia de les xarxes amb seguretat WEP, l'atac a xarxes amb segureta WPA o WPA2 no requereix de capturar molts paquets, 
        la informaci√≥ important est√† en el <strong>handshake</strong> , conegut con 4-way-handshake     </p>
        <pre>aireplay-ng --deauth 5 -a BSSID -c mac_client  wlan1</pre>
    <p>   Una vegada capturat el handshake, es realitza un atac de for√ßa bruta o diccionari per obtindre la clau o passowrd. Per tant, la seguretat 
        d'este tipus de xarxes resideix en la fortalesa de la clau.      </p> 
    <pre>aircrack-ng fitxer -w rockyou.txt</pre>
        
        <hr><h2>Atacs a WPS    </h2>
    <p>El WPS (Wi-Fi Protected Setup) √©s un mecanisme dissenyat per facilitar la connexi√≥ de dispositius Wi-Fi a un router 
        sense haver d‚Äôintroduir manualment la contrasenya llarga de la xarxa. La idea original era millorar la usabilitat, 
        sobretot per a usuaris no t√®cnics.</p>
    <p>Hi ha diverses formes de WPS, per√≤ totes comparteixen la mateixa filosofia: simplificar l‚Äôacc√©s a la xarxa.
    La forma m√©s coneguda √©s el PIN WPS. El router t√© un codi num√®ric associat que permet autenticar un dispositiu.</p>
    <p>El problema √©s que aquest PIN: √©s curt, t√© una estructura previsible i el proc√©s de validaci√≥ est√† mal dissenyat</p>
    <p>Una altra modalitat √©s el WPS per bot√≥ (Push Button Configuration). Quan l‚Äôusuari prem un bot√≥ f√≠sic o virtual en el 
        router, s‚Äôobri una finestra temporal en la qual qualsevol dispositiu pot connectar-se sense contrasenya. Encara que
         √©s m√©s segur que el PIN, continua sent un risc si s‚Äôactiva en entorns no controlats, perqu√® la xarxa accepta connexions 
         sense validaci√≥ expl√≠cita de l‚Äôusuari.</p>
    <p>Tamb√© existeixen altres variants menys comunes, com WPS via NFC o USB, per√≤ no s√≥n habituals en entorns reals.</p>  
    <p>Des del punt de vista de la seguretat, el problema fonamental de WPS √©s que trenca el model de seguretat de WPA/WPA2. 
        Encara que la contrasenya siga robusta, si WPS est√† activat, la seguretat global de la xarxa queda limitada pel         mecanisme m√©s feble.</p>       
    <pre># Provar si les xarxes sense fil assolibles tenen activat WPS
wash --interface wlan1     </pre>
    <p>L'eixida del comando mostra la versi√≥ de WPS, el fabricant, i si est√† bloquejat o no</p>
    <p>Despres es pot vore quins m√®todes/modes accepta cada AP</p>
    <pre>sudo airodump-ng --wps wlan0mon</pre>
    <p>PBC: Indica que el router t√© WPS per bot√≥. / LAB:  Indica que el punt d‚Äôacc√©s accepta WPS mitjan√ßant PIN.  /
        DISP: Indica que el router pot mostrar un PIN WPS din√†mic a la seua interf√≠cie   </p>
    <p>En una auditoria Wi-Fi: LAB / DISP actius ‚Üí risc clar per disseny de WPS. / PBC actiu ‚Üí risc depenent del context </p>
    <p>Una vegada localitzat un WPS actiu, es pot provar el pin per defecte i conegut (eina WPS Pin Generator)</p>
    <p>Si no funciona, es pot continuar amb un atac de for√ßa bruta amb la ferramenta <strong>reaver</strong></p>
    <pre>reaver -i wlan1 -b b0:4h:00:0A:E0:78 -c 4 -vv
        # -b BSSID  -c CANAL     </pre>
    <p>Es posible que el AP es bloqueje despr√©s de diversos intents fallits.</p>
    <p>En este cas es pot intentar un atac DoS i for√ßar a que alg√∫ reinicie el router</p>
    <p>Alguns models d'AP permeten (fer sobre ells) un atac <strong>Pixie Dust</strong>, el qual es pot fer amb la ferramenta <code>reaver</code> amb un parametre -K</p>
    <pre>reaver -i wlan1 -b MAC -c 4 -vv -K 1</pre>

    <hr><h2>Creaci√≥ de punts d'acc√©s falsos</h2>
    <p>Un AP fals, √©s un AP ilegitim connectat a una xarxa legitima. Hi ha dos tipus principals. Rogue AP i Evil Twin</p>
    <h3>Rogue AP</h3>
    <p>Un rogue AP (Rogue Access Point) √©s un punt d‚Äôacc√©s Wi-Fi no autoritzat que apareix dins o prop d‚Äôuna xarxa d‚Äôuna
         organitzaci√≥ i no est√† gestionat per l'organitzaci√≥. El problema no √©s nom√©s que siga ‚Äúun Wi-Fi m√©s‚Äù, sin√≥ que pot convertir-se en una porta d‚Äôentrada 
         directa a la xarxa interna o en un mitj√† per interceptar comunicacions.</p>
    <p>Es pot fer servir un router neutre, connectant la interficie WAN/Internet a una roseta de la xarxa de la organitzaci√≥, i esperant una IP per DHCP
      Una vegada el route rep una ip de la xarxa, si es connectem com a clients del router, tindrem acc√©s a la xarxa.     </p>

    <h3>Evil Twin</h3>
    <p> √âs una c√≤pia d'un punt d'acc√©s leg√≠tim que no te perqu√® donar acc√©s a un xarxa leg√≠tima o a internet. La victima accedeix 
        a la xarxa propia de l'atacant, (que pot redirigir les peticions a internet o a altra xarxa). Es pot fer una MitM    </p>


    </section>         

 
   <section id="labs">
    <h1>Laboratoris</h1>
    <p>Primer es preparar√† un AP baix el nostre control, amb una configuraci√≥ WEP amb clau de 8 caracters. Tamb√© s'activar√† el mecanisme WPS</p>
    <p>Tot seguit es realitzar√† un atac WEP i un atac WPS</p>
    <p>Una bona pr√†ctica abans de comen√ßar o fer qualsevol atac wifi, √©s fer un <strong>spoofing a la MAC</strong> de la nostra 
    interficie de xarxa sense fil, per no deixar traces de l'atac.</p>
    <pre>ip link set dev wlan1 down
ip link set dev wlan1 adress 11:22:33:44:55:66
ip link set dev wlan1  up     </pre>
    <p>Una vegada acabats els atacs anteriors, configurarem l'AP amb seguretat WPA/WPS2, amb una clau de diccionari (rockyou). Una 
        vegada configurat el router AP, procedirem a realitzar l'atac.      </p>    

    <h3>Desxifrat i an√†lisi del tr√†nsit capturat</h3>
    <p>Els atacs WiFi, no sols permeten obtindre la password de connexi√≥ a la xarxa sense fil, tamb√© permeten capturar el tr√†nsit 
        dels clients connectats legitimament, i vore si s'ha utilitzat algun protocol insegur , com HTTP, i aix√≠ analitzar el contingut 
        en busca d'informaci√≥ valuosa per al hacker.     </p>
    <p>Per desxifrar el tr√†nsit, s'usa la comanda <strong>airdecap-ng</strong> </p>
    <pre>airdecap-ng -b BSSID -w clau_wep_en_hexadecimal -o fitxer.cap fitxercapturat.cap 
    # la clau wep obtinguda amb aircrack-ng
    </pre>

    <h3>Atac Evil Twin</h3>
    <p>Amb un atac Evil Twin es pot obtindre la clau en connectar (intentar) un client..</p>
    <p>Per fer aix√≤ s'utilitza la suite <strong>airgeddon</strong>, que no ve instal¬∑lada en kali, per√≤ es pot posar</p>
    <pre>apt update && apt install -y airgeddon
airgeddon      </pre>

    </section>         
     

    </main>

    <footer>
      <p style="font-family: 'CCSymbols', sans-serif; font-size:larger;" >
        Llic√®ncia: &#x1F16D; &#x1F16F; &#x1F10E; &#x1F10F; - U7: Hacking √âtic a Xarxes sense fil 
      </p>
    </footer>
  </div>

  
    <script src="scriptsunitats.js"></script>
</body>
</html>
